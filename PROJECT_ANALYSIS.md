# BTC/USDT é‡åŒ–äº¤æ˜“ç³»çµ± - å°ˆæ¡ˆåˆ†æèˆ‡æ”¹é€²å»ºè­°

## ğŸ“‹ å°ˆæ¡ˆç¸½è¦½

### ä¸€å¥è©±ä»‹ç´¹
é€™æ˜¯ä¸€å¥—åŸºæ–¼ã€Œ**ç‰¹å¾µç®±å­åˆ†æï¼ˆFeature Bin Analysisï¼‰**ã€çš„ BTC/USDT é‡åŒ–äº¤æ˜“ç³»çµ±ï¼Œå¾ Binance æŠ“å– 4 å°æ™‚ K ç·šè³‡æ–™ï¼Œé€éç‰¹å¾µå·¥ç¨‹ã€åˆ†ç®±çµ±è¨ˆèˆ‡æœªä¾†çª—å£é—œè¯åˆ†æï¼Œç”¢ç”Ÿè²·è³£äº¤æ˜“ä¿¡è™Ÿï¼Œæ”¯æ´å›æ¸¬é©—è­‰ã€Discord é€šçŸ¥èˆ‡è‡ªå‹•ä¸‹å–®åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹è‰²
- ğŸ“Š **ç‰¹å¾µç®±å­é æ¸¬æ³•**ï¼šå°‡æŠ€è¡“æŒ‡æ¨™åˆ†ç®±ï¼Œçµ±è¨ˆå„ç®±å­èˆ‡æœªä¾†é«˜ä½é»çš„é—œè¯æ€§
- ğŸ¯ **è‡ªå‹•åŒ–å®Œæ•´æµç¨‹**ï¼šå¾è³‡æ–™æŠ“å–ã€ç‰¹å¾µå·¥ç¨‹ã€åˆ†æã€æ±ºç­–åˆ°åŸ·è¡Œä¸€æ¢é¾
- ğŸ”„ **å®šæ™‚è‡ªå‹•åŸ·è¡Œ**ï¼šæ”¯æ´æ¯ 4 å°æ™‚è‡ªå‹•é‹è¡Œå®Œæ•´äº¤æ˜“æµç¨‹
- ğŸ“¨ **Discord å³æ™‚é€šçŸ¥**ï¼šäº¤æ˜“è©•ä¼°å ±å‘Šè‡ªå‹•ç™¼é€åˆ° Discord
- ğŸ”’ **å®‰å…¨è¨­è¨ˆ**ï¼šAPI é‡‘é‘°èˆ‡ Webhook å¾é…ç½®æª”è®€å–ï¼Œå·²åŠ å…¥ `.gitignore`

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹èˆ‡è³‡æ–™æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BTC/USDT é‡åŒ–äº¤æ˜“ç³»çµ±                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ğŸ“¥ è³‡æ–™ç²å– (fetch_data.py)
   â””â”€â†’ Binance API â†’ data/cleaned.csv (500ç­† 4H Kç·š)

2. ğŸ§® ç‰¹å¾µå·¥ç¨‹ (add_features.py)
   â””â”€â†’ è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ â†’ data/cleaned_features.csv
       (MA, EMA, RSI, MACD, ATR, Bollinger Bands, VWAP...)

3. ğŸ“¦ ç‰¹å¾µåˆ†ç®± (binned_features.py)
   â””â”€â†’ 12å€‹Kç·šç‚ºä¸€çª—å£åˆ†ç®± â†’ data/binned_features.csv
       (æ¯å€‹ç‰¹å¾µç”¢ç”Ÿ {feature}_binned)

4. ğŸ” ç®±å­é—œè¯åˆ†æ (feature_bin_analysis.py)
   â””â”€â†’ çµ±è¨ˆå„ç®±å­èˆ‡æœªä¾†12ç­†é«˜ä½é»é—œä¿‚ â†’ data/feature_analysis_report.json
       (é æ¸¬åˆ†æ•¸ã€ä¸Šæ¼²æ©Ÿç‡ã€å¹³å‡è®ŠåŒ–%)

5. ğŸ“ˆ è¨ˆç®—äº¤æ˜“åˆ†æ•¸ (calculate_trading_scores.py)
   â””â”€â†’ æ ¹æ“šç®±å­åŒ¹é…åº¦æˆ–åŠ æ¬Šæ©Ÿç‡ â†’ data/trading_signals_with_scores.csv
       (buy_score, sell_score, signal_score)

6. ğŸ§¾ ç”Ÿæˆè©•ä¼°å ±å‘Š (generate_latest_assessment.py)
   â””â”€â†’ æœ€æ–°ä¸€ç­†Kç·šè©•ä¼° â†’ data/latest_trading_assessment.json
       (recommendation: è²·å…¥/è³£å‡º/è§€æœ›)

7. ğŸ“¨ Discord é€šçŸ¥ (send_to_discord.py)
   â””â”€â†’ ç™¼é€åœ–æ–‡ä¸¦èŒ‚çš„äº¤æ˜“å ±å‘Šåˆ° Discord

8. ğŸ¤– è‡ªå‹•äº¤æ˜“åŸ·è¡Œ (go_again.py)
   â””â”€â†’ æ ¹æ“š recommendation åŸ·è¡Œé–‹å€‰/å¹³å€‰
       (æ”¯æ´ dry-run èˆ‡ --live æ¨¡å¼)

9. ğŸ”„ å®šæ™‚æ’ç¨‹ (a_main.py)
   â””â”€â†’ æ¯4å°æ™‚è‡ªå‹•åŸ·è¡Œä¸Šè¿°å®Œæ•´æµç¨‹
```

---

## ğŸ“ ä¸»è¦æª”æ¡ˆèªªæ˜

### æ ¸å¿ƒè³‡æ–™è™•ç†
| æª”æ¡ˆ | åŠŸèƒ½ | è¼¸å…¥ | è¼¸å‡º |
|------|------|------|------|
| `fetch_data.py` | å¾ Binance æŠ“å– K ç·šè³‡æ–™ | Binance API | `data/cleaned.csv` |
| `add_features.py` | è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ç‰¹å¾µ | `data/cleaned.csv` | `data/cleaned_features.csv` |
| `binned_features.py` | å°‡ç‰¹å¾µåˆ†ç®± | `data/cleaned_features.csv` | `data/binned_features.csv` |

### åˆ†æèˆ‡æ±ºç­–
| æª”æ¡ˆ | åŠŸèƒ½ | è¼¸å…¥ | è¼¸å‡º |
|------|------|------|------|
| `feature_bin_analysis.py` | åˆ†æç®±å­èˆ‡æœªä¾†èµ°å‹¢é—œè¯ | `data/binned_features.csv` | `data/feature_analysis_report.json` |
| `calculate_trading_scores.py` | è¨ˆç®—è²·è³£åˆ†æ•¸ | `data/binned_features.csv`<br>`data/feature_analysis_report.json` | `data/trading_signals_with_scores.csv` |
| `generate_latest_assessment.py` | ç”Ÿæˆæœ€æ–°äº¤æ˜“å»ºè­° | `data/trading_signals_with_scores.csv` | `data/latest_trading_assessment.json` |

### å›æ¸¬èˆ‡é©—è­‰
| æª”æ¡ˆ | åŠŸèƒ½ | èªªæ˜ |
|------|------|------|
| `backtest_trading.py` | å–®çµ„åƒæ•¸å›æ¸¬ | æ¨¡æ“¬è²·å…¥è³£å‡ºï¼Œè¨ˆç®—å‹ç‡ã€ç¸½å ±é…¬ã€Sharpeç­‰ |
| `quick_signal_backtest.py` | é–¾å€¼æƒæå›æ¸¬ | æ¸¬è©¦å¤šçµ„ buy/sell é–¾å€¼ï¼Œæ‰¾å‡ºæœ€ä½³åƒæ•¸çµ„åˆ |

### é€šçŸ¥èˆ‡åŸ·è¡Œ
| æª”æ¡ˆ | åŠŸèƒ½ | èªªæ˜ |
|------|------|------|
| `send_to_discord.py` | Discord é€šçŸ¥ | ç™¼é€äº¤æ˜“è©•ä¼°å ±å‘Šï¼ˆæ”¯æ´ emoji èˆ‡å½©è‰² embedï¼‰ |
| `go_again.py` | è‡ªå‹•ä¸‹å–® | æ ¹æ“š recommendation åŸ·è¡Œäº¤æ˜“ï¼ˆæ”¯æ´ dry-runï¼‰ |
| `a_main.py` | å®šæ™‚æ’ç¨‹ä¸»ç¨‹å¼ | æ¯4å°æ™‚è‡ªå‹•åŸ·è¡Œå®Œæ•´æµç¨‹ |

### é…ç½®èˆ‡å·¥å…·
| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `user/api.config` | API é‡‘é‘°èˆ‡ Webhook é…ç½®ï¼ˆå·²åŠ å…¥ .gitignoreï¼‰ |
| `.gitignore` | Git å¿½ç•¥è¦å‰‡ï¼ˆä¿è­·æ•æ„Ÿè³‡æ–™ï¼‰ |

---

## âœ… å°ˆæ¡ˆå„ªé»

### 1. æ¸…æ™°çš„æ¨¡çµ„åŒ–è¨­è¨ˆ
- æ¯å€‹æ­¥é©Ÿç¨ç«‹æˆä¸€å€‹ Python æª”æ¡ˆ
- è³‡æ–™æµå‘æ˜ç¢ºï¼šCSV â†’ è™•ç† â†’ CSV â†’ åˆ†æ â†’ JSON
- æ˜“æ–¼ç†è§£ã€ç¶­è­·èˆ‡æ“´å±•

### 2. å‰µæ–°çš„ç‰¹å¾µç®±å­åˆ†ææ³•
- ä¸ä¾è³´å‚³çµ±æ©Ÿå™¨å­¸ç¿’æ¨¡å‹
- é€éçµ±è¨ˆç®±å­èˆ‡æœªä¾†èµ°å‹¢çš„é—œè¯æ€§åšé æ¸¬
- å…·æœ‰å¯è§£é‡‹æ€§ï¼šå¯è¿½æº¯æ¯å€‹ç‰¹å¾µå¦‚ä½•å½±éŸ¿æ±ºç­–

### 3. å®Œæ•´çš„è‡ªå‹•åŒ–æµç¨‹
- å¾è³‡æ–™æŠ“å–åˆ°ä¸‹å–®åŸ·è¡Œå…¨è‡ªå‹•
- æ”¯æ´å®šæ™‚æ’ç¨‹ï¼ˆæ¯4å°æ™‚ï¼‰
- Discord å³æ™‚é€šçŸ¥ï¼Œæ–¹ä¾¿é ç¨‹ç›£æ§

### 4. å®‰å…¨æ€§è€ƒé‡
- API é‡‘é‘°å¾é…ç½®æª”è®€å–ï¼Œä¸ç¡¬ç·¨ç¢¼
- å·²åŠ å…¥ `.gitignore` ä¿è­·æ•æ„Ÿè³‡æ–™
- æ”¯æ´ dry-run æ¨¡å¼ï¼Œé¿å…èª¤æ“ä½œ

### 5. å›æ¸¬åŠŸèƒ½å®Œå–„
- æä¾›å–®çµ„åƒæ•¸èˆ‡é–¾å€¼æƒæå…©ç¨®å›æ¸¬
- è¼¸å‡ºè©³ç´°çµ±è¨ˆï¼šå‹ç‡ã€Sharpeã€æœ€å¤§å›æ’¤ç­‰
- ä¾¿æ–¼åƒæ•¸èª¿å„ª

---

## âš ï¸ ç›®å‰é¢¨éšªèˆ‡å•é¡Œ

### é«˜å„ªå…ˆç´šï¼ˆP0ï¼‰- éœ€ç«‹å³ä¿®æ­£

#### 1. API éŒ¯èª¤è™•ç†ä¸è¶³
**å•é¡Œï¼š** ç•¶å‰é‡åˆ°çš„ `code -2015` éŒ¯èª¤ï¼ˆInvalid API-key, IP, or permissionsï¼‰æ²’æœ‰å‹å–„æç¤ºã€‚

**å½±éŸ¿ï¼š** é›£ä»¥å¿«é€Ÿæ’æŸ¥å•é¡Œï¼Œå¯èƒ½å°è‡´äº¤æ˜“å¤±æ•—ã€‚

**å»ºè­°ä¿®æ­£ï¼š**
```python
# åœ¨ go_again.py çš„ _req å‡½å¼ä¸­åŠ å…¥ï¼š
def _req(method, endpoint, params=None):
    # ... ç¾æœ‰ç¨‹å¼ç¢¼ ...
    try:
        res = requests.request(method, url, params=params, headers=headers, timeout=10)
        json_res = res.json()
        
        # æª¢æŸ¥å¸¸è¦‹éŒ¯èª¤ç¢¼
        if isinstance(json_res, dict) and 'code' in json_res:
            code = json_res['code']
            msg = json_res.get('msg', '')
            
            if code == -2015:
                print(f"âŒ API é‡‘é‘°ç„¡æ•ˆæˆ–æ¬Šé™ä¸è¶³")
                print("   è«‹æª¢æŸ¥ï¼š")
                print("   1. API Key æ˜¯å¦æ­£ç¢º")
                print("   2. IP æ˜¯å¦åœ¨ç™½åå–®ä¸­")
                print("   3. API æ˜¯å¦æœ‰ Futures äº¤æ˜“æ¬Šé™")
            
        return json_res
    except Exception as e:
        return {"error": str(e)}
```

#### 2. Discord Webhook ç¼ºå°‘ç©ºå€¼æª¢æŸ¥
**å•é¡Œï¼š** è‹¥ `DISCORD_WEBHOOK_RUN` æœªè¨­å®šï¼Œæœƒå˜—è©¦å° None ç™¼é€è«‹æ±‚ã€‚

**ä¿®æ­£ï¼š**
```python
# åœ¨ send_to_discord.py çš„ main() ä¸­åŠ å…¥ï¼š
if not webhook_url:
    print("âŒ æœªè¨­å®š DISCORD_WEBHOOK_RUNï¼ˆè«‹åœ¨ user/api.config æˆ–ç’°å¢ƒè®Šæ•¸ä¸­è¨­å®šï¼‰")
    print("   ç¯„ä¾‹ï¼šDISCORD_WEBHOOK_RUN = \"https://discord.com/api/webhooks/...\"")
    return
```

#### 3. è¦†å¯«åŸå§‹åˆ†æ•¸å°è‡´è¿½è¹¤å›°é›£
**å•é¡Œï¼š** `calculate_trading_scores.py` ä¸­å°‡ `buy_score` ç›´æ¥è¦†å¯«ç‚ºæ¨™æº–åŒ–å¾Œçš„å€¼ã€‚

**å½±éŸ¿ï¼š** ç„¡æ³•æ¯”å°åŸå§‹åˆ†æ•¸èˆ‡æ¨™æº–åŒ–åˆ†æ•¸ï¼Œå›æ¸¬æ™‚é›£ä»¥é©—è­‰ã€‚

**å»ºè­°ï¼š** ä¿ç•™åŸå§‹åˆ†æ•¸ï¼Œæ¨™æº–åŒ–çµæœå¦å­˜æ–°æ¬„ä½ã€‚

---

### ä¸­å„ªå…ˆç´šï¼ˆP1ï¼‰- çŸ­æœŸæ”¹é€²

#### 4. ç¼ºå°‘æ—¥èªŒè¨˜éŒ„
**å•é¡Œï¼š** ç„¡æŒä¹…åŒ–æ—¥èªŒï¼ŒéŒ¯èª¤ç™¼ç”Ÿæ™‚é›£ä»¥è¿½æº¯ã€‚

**å»ºè­°ï¼š**
```python
# åœ¨ a_main.py é–‹é ­åŠ å…¥ï¼š
import logging
import os

os.makedirs('logs', exist_ok=True)
logging.basicConfig(
    filename='logs/trading_system.log',
    level=logging.INFO,
    format='%(asctime)s [%(levelname)s] %(message)s',
    datefmt='%Y-%m-%d %H:%M:%S'
)

# åœ¨é—œéµæ­¥é©ŸåŠ å…¥æ—¥èªŒ
logging.info(f"é–‹å§‹åŸ·è¡Œä»»å‹™ - {datetime.now()}")
logging.error(f"æ­¥é©Ÿå¤±æ•—: {desc} - {str(e)}")
```

#### 5. å›æ¸¬éæ–¼ç°¡åŒ–
**å•é¡Œï¼š**
- æœªè€ƒæ…®äº¤æ˜“æˆæœ¬ï¼ˆæ‰‹çºŒè²»ã€æ»‘é»ï¼‰
- ä½¿ç”¨ pnl sum è€Œéè³‡ç”¢æ›²ç·š
- ç¼ºå°‘å¹´åŒ–å ±é…¬ã€æœ€å¤§å›æ’¤ç™¾åˆ†æ¯”ç­‰é—œéµæŒ‡æ¨™

**å»ºè­°ï¼š** æ”¹ç”¨è³‡ç”¢æ›²ç·šè¨ˆç®—ï¼ŒåŠ å…¥äº¤æ˜“æˆæœ¬åƒæ•¸ã€‚

#### 6. ç¼ºå°‘ä¾è³´ç®¡ç†èˆ‡æ–‡æª”
**å•é¡Œï¼š** ç„¡ `requirements.txt`ï¼Œæ–°æ‰‹é›£ä»¥å¿«é€Ÿéƒ¨ç½²ã€‚

**å»ºè­°ï¼š** å»ºç«‹ä»¥ä¸‹æª”æ¡ˆã€‚

---

### ä½å„ªå…ˆç´šï¼ˆP2ï¼‰- ä¸­æœŸå„ªåŒ–

#### 7. é…ç½®ç®¡ç†å¯æ”¹é€²
**å»ºè­°ï¼š** ä½¿ç”¨ `.env` æª”æ¡ˆæˆ–ç’°å¢ƒè®Šæ•¸ï¼Œé¿å…ç›´æ¥å­˜å„²æ•æ„Ÿè³‡æ–™ã€‚

#### 8. ç¼ºå°‘å–®å…ƒæ¸¬è©¦
**å»ºè­°ï¼š** ä½¿ç”¨ pytest æ¸¬è©¦é—œéµå‡½å¼ï¼ˆz-scoreã€åˆ†æ•¸è¨ˆç®—ã€å›æ¸¬é‚è¼¯ï¼‰ã€‚

#### 9. åˆ†ç®±ç­–ç•¥å¯å„ªåŒ–
**å•é¡Œï¼š** å°å¸¸æ•¸åˆ—æˆ–æ•¸æ“šåˆ†å¸ƒæ¥µç«¯çš„ç‰¹å¾µï¼Œqcut å¯èƒ½å¤±æ•—æˆ–ç”¢ç”Ÿç„¡æ„ç¾©åˆ†ç®±ã€‚

**å»ºè­°ï¼š** è¨˜éŒ„åˆ†ç®±å¤±æ•—çš„ç‰¹å¾µï¼Œæ‰‹å‹•èª¿æ•´æˆ–æ’é™¤ã€‚

---

## ğŸ”§ å…·é«”æ”¹é€²æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šå»ºç«‹ requirements.txt

```bash
# requirements.txt
pandas>=1.5.0
numpy>=1.24.0
requests>=2.28.0
websocket-client>=1.5.0
schedule>=1.2.0
pytest>=7.4.0
python-dotenv>=1.0.0
```

å®‰è£æ–¹å¼ï¼š
```bash
pip install -r requirements.txt
```

---

### æ–¹æ¡ˆ 2ï¼šå»ºç«‹ README.md

```markdown
# BTC/USDT é‡åŒ–äº¤æ˜“ç³»çµ±

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´
pip install -r requirements.txt

### 2. è¨­å®š API é‡‘é‘°
è¤‡è£½ä¸¦ç·¨è¼¯é…ç½®æª”ï¼š
cp user/api.config.example user/api.config

å¡«å…¥æ‚¨çš„ Binance API é‡‘é‘°èˆ‡ Discord Webhook

### 3. åŸ·è¡Œå®Œæ•´æµç¨‹ï¼ˆå–®æ¬¡ï¼‰
python a_main.py  # ä¿®æ”¹ AUTO_MODE = False

### 4. å•Ÿå‹•å®šæ™‚æ’ç¨‹ï¼ˆæ¯4å°æ™‚ï¼‰
python a_main.py  # ä¿®æ”¹ AUTO_MODE = True

### 5. å›æ¸¬
python quick_signal_backtest.py

## æª”æ¡ˆçµæ§‹
- fetch_data.py: è³‡æ–™æŠ“å–
- add_features.py: ç‰¹å¾µå·¥ç¨‹
- binned_features.py: åˆ†ç®±
- feature_bin_analysis.py: ç®±å­åˆ†æ
- calculate_trading_scores.py: è¨ˆç®—äº¤æ˜“åˆ†æ•¸
- generate_latest_assessment.py: ç”Ÿæˆå ±å‘Š
- send_to_discord.py: Discord é€šçŸ¥
- go_again.py: è‡ªå‹•ä¸‹å–®ï¼ˆåŠ ä¸Š --live åŸ·è¡Œå¯¦ç›¤ï¼‰
```

---

### æ–¹æ¡ˆ 3ï¼šå»ºç«‹é…ç½®ç¯„ä¾‹æª”

```python
# user/api.config.example
API_KEY = "your_binance_api_key_here"
SECRET_KEY = "your_binance_secret_key_here"
DISCORD_WEBHOOK_RUN = "https://discord.com/api/webhooks/your_webhook_here"

# å¯é¸é…ç½®
BASE_URL = "https://fapi.binance.com"  # æˆ–æ¸¬è©¦ç¶² https://testnet.binancefuture.com
SYMBOL = "BTCUSDT"
```

---

### æ–¹æ¡ˆ 4ï¼šæ”¹é€²å›æ¸¬è…³æœ¬

åœ¨ `quick_signal_backtest.py` ä¸­åŠ å…¥ï¼š

```python
def run_quick_backtest(signals_file, buy_thresholds, sell_thresholds, 
                       fee_rate=0.0004, slippage=0.0001):
    """
    fee_rate: æ‰‹çºŒè²»ç‡ï¼ˆ0.04%ï¼‰
    slippage: æ»‘é»ï¼ˆ0.01%ï¼‰
    """
    # ... ç¾æœ‰ç¨‹å¼ç¢¼ ...
    
    # è¨ˆç®—å«æˆæœ¬çš„ pnl
    pnl_gross = (exit_price - entry_price) / entry_price
    cost = fee_rate * 2 + slippage  # è²·+è³£æ‰‹çºŒè²» + æ»‘é»
    pnl_net = pnl_gross - cost
    
    # è¨ˆç®—è³‡ç”¢æ›²ç·š
    capital = 1.0  # åˆå§‹è³‡é‡‘ 100%
    equity_curve = []
    for pnl in trades_df['pnl']:
        capital *= (1 + pnl)
        equity_curve.append(capital)
    
    # è¨ˆç®—æœ€å¤§å›æ’¤ç™¾åˆ†æ¯”
    peak = pd.Series(equity_curve).cummax()
    drawdown = (pd.Series(equity_curve) - peak) / peak
    max_dd = drawdown.min()
    
    # å¹´åŒ–å ±é…¬ï¼ˆå‡è¨­4å°æ™‚ä¸€ç­†ï¼Œä¸€å¹´ç´„2190ç­†ï¼‰
    total_periods = len(trades_df)
    years = total_periods / 2190
    cagr = (capital ** (1/years)) - 1 if years > 0 else 0
    
    return {
        'total_return': capital - 1,
        'cagr': cagr,
        'max_dd': max_dd,
        'sharpe': sharpe,
        # ... å…¶ä»–æŒ‡æ¨™
    }
```

---

## ğŸ“Š å›æ¸¬çµæœåƒè€ƒï¼ˆå·²åŸ·è¡Œï¼‰

æ ¹æ“š `quick_signal_backtest.py` æƒæçµæœï¼š

| æ’å | buy_t | sell_t | äº¤æ˜“æ¬¡æ•¸ | å‹ç‡ | ç¸½æ”¶ç›Š | Sharpe | æœ€å¤§å›æ’¤ |
|------|-------|--------|---------|------|--------|--------|----------|
| 1 | -1.75 | -3.00 | 245 | 52.2% | 4.51% | 0.44 | -9.43% |
| 2 | 1.00 | -2.50 | 52 | 48.1% | 3.17% | 1.34 | -4.07% |
| 3 | 1.00 | -1.00 | 49 | 44.9% | 2.95% | 1.20 | -5.10% |

**å»ºè­°ï¼š**
- äº¤æ˜“æ¬¡æ•¸è¼ƒå¤šï¼ˆ>200ï¼‰çš„çµ„åˆé›–ç„¶ç¸½æ”¶ç›Šé«˜ï¼Œä½† Sharpe è¼ƒä½ã€å›æ’¤è¼ƒå¤§
- äº¤æ˜“æ¬¡æ•¸é©ä¸­ï¼ˆ40-60ï¼‰çš„çµ„åˆ Sharpe è¼ƒé«˜ï¼Œæ›´ç©©å®š
- å»ºè­°é¸æ“‡ `buy_t=1.0, sell_t=-2.5` ä½œç‚ºåˆå§‹åƒæ•¸

---

## ğŸ¯ å„ªå…ˆåŸ·è¡Œå»ºè­°ï¼ˆè¡Œå‹•è¨ˆç•«ï¼‰

### ç«‹å³ä¿®æ­£ï¼ˆæœ¬é€±å…§ï¼‰
1. âœ… åœ¨ `send_to_discord.py` åŠ å…¥ webhook ç©ºå€¼æª¢æŸ¥
2. âœ… åœ¨ `go_again.py` æ”¹é€² API éŒ¯èª¤è¨Šæ¯
3. âœ… ä¿ç•™åŸå§‹ buy_score/sell_scoreï¼Œæ¨™æº–åŒ–å¦å­˜æ–°æ¬„ä½
4. âœ… å»ºç«‹ `requirements.txt`
5. âœ… å»ºç«‹ `README.md`
6. âœ… å»ºç«‹ `user/api.config.example`

### çŸ­æœŸæ”¹é€²ï¼ˆ2é€±å…§ï¼‰
7. åŠ å…¥ logging æ¨¡çµ„ï¼Œè¨˜éŒ„é—œéµæ­¥é©Ÿèˆ‡éŒ¯èª¤
8. æ”¹é€²å›æ¸¬è…³æœ¬ï¼ŒåŠ å…¥äº¤æ˜“æˆæœ¬èˆ‡è³‡ç”¢æ›²ç·š
9. æ–°å¢ç°¡å–®çš„å–®å…ƒæ¸¬è©¦ï¼ˆè‡³å°‘æ¸¬è©¦ z-score èˆ‡åˆ†æ•¸è¨ˆç®—ï¼‰

### ä¸­æœŸå„ªåŒ–ï¼ˆ1å€‹æœˆå…§ï¼‰
10. æ”¹ç”¨ `.env` ç®¡ç†æ•æ„Ÿé…ç½®
11. å¯¦ä½œ Binance User Data Streamï¼ˆç›£æ§å¸³æˆ¶è®ŠåŒ–ï¼‰
12. å»ºç«‹ç°¡å–®çš„ Web UIï¼ˆStreamlitï¼‰å±•ç¤ºæœ€æ–°å ±å‘Šèˆ‡å›æ¸¬çµæœ
13. åŠ å…¥æ›´å¤šæŠ€è¡“æŒ‡æ¨™èˆ‡è‡ªé©æ‡‰åˆ†ç®±ç­–ç•¥

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨æœ¬å°ˆæ¡ˆ

### é¦–æ¬¡è¨­å®š
```bash
# 1. å…‹éš†å°ˆæ¡ˆï¼ˆå¦‚æœå¾ Gitï¼‰
git clone https://github.com/fainstar/iRemo_1016.git
cd iRemo_1016

# 2. å®‰è£ä¾è³´
pip install -r requirements.txt

# 3. è¨­å®šé…ç½®
cp user/api.config.example user/api.config
# ç·¨è¼¯ user/api.configï¼Œå¡«å…¥æ‚¨çš„ API é‡‘é‘°

# 4. æ¸¬è©¦å–®æ¬¡åŸ·è¡Œï¼ˆdry-runï¼‰
python go_again.py -j data/latest_trading_assessment.json
```

### å›æ¸¬èˆ‡åƒæ•¸èª¿å„ª
```bash
# åŸ·è¡Œé–¾å€¼æƒæå›æ¸¬
python quick_signal_backtest.py

# æŸ¥çœ‹çµæœ
cat data/quick_backtest_results.csv
```

### å•Ÿå‹•è‡ªå‹•åŒ–äº¤æ˜“
```bash
# å…ˆåœ¨æ¸¬è©¦ç¶²æ¸¬è©¦
# ä¿®æ”¹ user/api.config ä¸­çš„ BASE_URL ç‚ºæ¸¬è©¦ç¶²åœ°å€

# å•Ÿå‹•å®šæ™‚æ’ç¨‹ï¼ˆæ¯4å°æ™‚ï¼‰
python a_main.py  # è¨­å®š AUTO_MODE = True

# å–®æ¬¡åŸ·è¡Œå¯¦ç›¤ï¼ˆè¬¹æ…ï¼ï¼‰
python go_again.py --live
```

---

## âš¡ å¸¸è¦‹å•é¡Œæ’æŸ¥

### Q1: API éŒ¯èª¤ -2015ï¼ˆInvalid API-keyï¼‰
**æª¢æŸ¥é …ç›®ï¼š**
1. API Key æ˜¯å¦æ­£ç¢ºè¤‡è£½åˆ° `user/api.config`
2. Binance å¸³æˆ¶ä¸­è©² API æ˜¯å¦å•Ÿç”¨ã€ŒFutures äº¤æ˜“ã€æ¬Šé™
3. è‹¥å•Ÿç”¨ IP ç™½åå–®ï¼Œç•¶å‰ IP æ˜¯å¦åœ¨åˆ—è¡¨ä¸­

### Q2: Discord ç™¼é€å¤±æ•—
**æª¢æŸ¥é …ç›®ï¼š**
1. `DISCORD_WEBHOOK_RUN` æ˜¯å¦æ­£ç¢ºè¨­å®š
2. Discord Webhook æ˜¯å¦è¢«åˆªé™¤æˆ–å¤±æ•ˆ
3. ç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸

### Q3: å›æ¸¬çµæœèˆ‡å¯¦ç›¤ä¸ç¬¦
**å¯èƒ½åŸå› ï¼š**
1. å›æ¸¬æœªè€ƒæ…®äº¤æ˜“æˆæœ¬ï¼ˆæ‰‹çºŒè²»ã€æ»‘é»ï¼‰
2. æ­·å²æ•¸æ“šèˆ‡å¯¦æ™‚æ•¸æ“šæœ‰å·®ç•°
3. ä½¿ç”¨æ¨™æº–åŒ–åˆ†æ•¸ä½†å›æ¸¬ç”¨åŸå§‹åˆ†æ•¸

### Q4: åˆ†ç®±ç‰¹å¾µç”¢ç”Ÿ NaN
**å¯èƒ½åŸå› ï¼š**
1. æŸäº›ç‰¹å¾µå€¼å…¨ç‚ºå¸¸æ•¸ï¼ˆæ¨™æº–å·®ç‚º0ï¼‰
2. qcut é‡åˆ°é‡è¤‡åˆ†ä½æ•¸
**è§£æ±ºæ–¹æ¡ˆï¼š** å·²åœ¨ç¨‹å¼ä¸­åŠ å…¥ fallback è‡³ cutï¼Œæˆ–æª¢æŸ¥ `binned_features.csv` ä¸­å“ªäº›æ¬„ä½ç‚º NaN

---

## ğŸ“ è¯çµ¡èˆ‡æ”¯æ´

- GitHub: https://github.com/fainstar/iRemo_1016
- Issues: https://github.com/fainstar/iRemo_1016/issues

---

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆåƒ…ä¾›å­¸ç¿’èˆ‡ç ”ç©¶ä½¿ç”¨ï¼Œå¯¦ç›¤äº¤æ˜“é¢¨éšªè‡ªè² ã€‚

**å…è²¬è²æ˜ï¼š** æœ¬ç³»çµ±ä¸æ§‹æˆæŠ•è³‡å»ºè­°ï¼Œéå¾€å›æ¸¬è¡¨ç¾ä¸ä»£è¡¨æœªä¾†æ”¶ç›Šã€‚ä½¿ç”¨å‰è«‹å……åˆ†äº†è§£é¢¨éšªï¼Œä¸¦åœ¨æ¸¬è©¦ç¶²å……åˆ†æ¸¬è©¦å¾Œå†è€ƒæ…®å¯¦ç›¤ã€‚

---

## ğŸ”„ æ›´æ–°æ—¥èªŒ

### 2025-10-29
- âœ… åŠ å…¥ API é‡‘é‘°é…ç½®æª”ç®¡ç†ï¼ˆ`user/api.config`ï¼‰
- âœ… æ–°å¢ Discord Webhook é…ç½®æ”¯æ´
- âœ… å»ºç«‹ `.gitignore` ä¿è­·æ•æ„Ÿè³‡æ–™
- âœ… æ–°å¢é–¾å€¼æƒæå›æ¸¬è…³æœ¬
- âœ… buy_score/sell_score æ”¯æ´ z-score æ¨™æº–åŒ–
- âœ… å®Œæˆå°ˆæ¡ˆåˆ†æèˆ‡æ”¹é€²å»ºè­°æ–‡æª”

### å¾…å®Œæˆ
- [ ] åŠ å…¥ logging æ—¥èªŒæ¨¡çµ„
- [ ] æ”¹é€²å›æ¸¬è…³æœ¬ï¼ˆäº¤æ˜“æˆæœ¬ã€è³‡ç”¢æ›²ç·šï¼‰
- [ ] å»ºç«‹å–®å…ƒæ¸¬è©¦
- [ ] å¯¦ä½œ User Data Stream
- [ ] å»ºç«‹ Web UI

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ29æ—¥
